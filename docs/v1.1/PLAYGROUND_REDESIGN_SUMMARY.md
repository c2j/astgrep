# Playground ç•Œé¢é‡æ–°è®¾è®¡æ€»ç»“

**å®Œæˆæ—¥æœŸ**: 2025-10-18  
**ç›®æ ‡**: æŒ‰ç…§å‚è€ƒå›¾ç¤ºé‡æ–°è®¾è®¡ Playground ç•Œé¢  
**çŠ¶æ€**: âœ… å®Œæˆ

---

## ğŸ“Š ç•Œé¢å·®å¼‚åˆ†æ

### åŸå§‹ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header: astgrep Playground                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Code | File          â”‚ Results | Metadata | Docs    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚ JSON | SARIF                 â”‚
â”‚ Input Panel          â”‚ Results Panel                â”‚
â”‚ (45%)                â”‚ (55%)                        â”‚
â”‚                      â”‚                              â”‚
â”‚ Language Select      â”‚ Findings Display             â”‚
â”‚ Code Editor          â”‚ Statistics Cards             â”‚
â”‚ Examples             â”‚ Metadata JSON                â”‚
â”‚ Run Button           â”‚ API Docs                     â”‚
â”‚                      â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®æ ‡ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header: astgrep Playground                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ simple | advanced    â”‚ test code | metadata | docs  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚ Pro | Turbo                  â”‚
â”‚ YAML Rules Editor    â”‚ Code Editor                  â”‚
â”‚ (45%)                â”‚ (55%)                        â”‚
â”‚                      â”‚                              â”‚
â”‚ Rule YAML Input      â”‚ Language Select              â”‚
â”‚ Simple/Advanced      â”‚ Code Input                   â”‚
â”‚ Tabs                 â”‚ Run Button                   â”‚
â”‚                      â”‚                              â”‚
â”‚ â–¼ Inspect Rule       â”‚ Matches Results              â”‚
â”‚ pattern: $VAR1 *...  â”‚ Statistics                   â”‚
â”‚                      â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ä¸»è¦å˜æ›´

### 1. å·¦ä¾§é¢æ¿ - YAML è§„åˆ™ç¼–è¾‘å™¨

**å˜æ›´å†…å®¹**:
- âœ… ä»"Code/File"æ ‡ç­¾é¡µæ”¹ä¸º"simple/advanced"æ ‡ç­¾é¡µ
- âœ… æ·»åŠ  YAML è§„åˆ™ç¼–è¾‘å™¨
- âœ… æ”¯æŒç®€å•å’Œé«˜çº§è§„åˆ™é…ç½®
- âœ… æ·»åŠ "Inspect Rule"éƒ¨åˆ†æ˜¾ç¤ºè§„åˆ™è¯¦æƒ…

**æ–°å¢åŠŸèƒ½**:
```html
<!-- simple æ ‡ç­¾é¡µ -->
<textarea id="rule-yaml">
rules:
  - id: multiplication_rule
    pattern: $VAR1 * $VAR2;
    message: Use Math.pow(<number>, 2);
    languages:
      - javascript
    severity: INFO
</textarea>

<!-- advanced æ ‡ç­¾é¡µ -->
<textarea id="rule-advanced">
metadata:
  cwe: CWE-123
  owasp: A1
  confidence: HIGH
  
patterns:
  - pattern-either:
      - pattern: $VAR1 * $VAR2
      - pattern: Math.pow($VAR1, 2)
</textarea>

<!-- Inspect Rule éƒ¨åˆ† -->
<div style="border-top: 1px solid #e0e0e0; padding: 12px 16px;">
  <div>â–¼ Inspect Rule</div>
  <div>pattern: $VAR1 * $VAR2;</div>
</div>
```

### 2. å³ä¾§é¢æ¿ - ä»£ç å’Œç»“æœ

**å˜æ›´å†…å®¹**:
- âœ… ä»"Results/Metadata/Docs"æ”¹ä¸º"test code/metadata/docs"
- âœ… æ·»åŠ "Pro"å’Œ"Turbo"æŒ‰é’®
- âœ… æ”¹è¿›ä»£ç ç¼–è¾‘å™¨æ ·å¼
- âœ… å¢å¼ºç»“æœæ˜¾ç¤ºæ ¼å¼

**æ–°å¢åŠŸèƒ½**:
```html
<!-- æ ‡ç­¾é¡µ -->
<button class="tab active">test code</button>
<button class="tab">metadata</button>
<button class="tab">docs</button>
<button class="tab">Pro</button>
<button class="tab">Turbo</button>

<!-- ä»£ç ç¼–è¾‘å™¨ -->
<textarea id="code-input" style="min-height: 300px;">
// Prompt the user for a number
var userInput = prompt("Enter a number:");
...
</textarea>

<!-- Run æŒ‰é’® -->
<button onclick="analyzeCode()" style="background: #4a90e2;">
  Run Ctrl+â†µ
</button>

<!-- ç»“æœæ˜¾ç¤º -->
<div style="margin-top: 20px;">
  <div>Matches</div>
  <div style="background: #f0f7ff; border: 1px solid #b3d9ff;">
    <div>Line 9</div>
    <div>Use Math.pow(<number>, 2);</div>
  </div>
  <div style="margin-top: 16px;">
    <div>âœ“ 1 match</div>
    <div>Semgrep v1.41.0 Â· in 0.6s Â· â— tests passed â–¼</div>
  </div>
</div>
```

### 3. æ ·å¼æ”¹è¿›

**å˜æ›´å†…å®¹**:
- âœ… æ”¹è¿›ä»£ç ç¼–è¾‘å™¨èƒŒæ™¯è‰² (#fafafa)
- âœ… å¢å¼ºç»“æœæ˜¾ç¤ºçš„è§†è§‰å±‚æ¬¡
- âœ… æ”¹è¿›æŒ‰é’®æ ·å¼å’Œé¢œè‰²
- âœ… ä¼˜åŒ–é—´è·å’Œæ’ç‰ˆ

**æ–°å¢æ ·å¼**:
```css
/* ä»£ç ç¼–è¾‘å™¨ */
textarea#code-input {
    min-height: 300px;
    background: #fafafa;
    border: 1px solid #ddd;
}

/* Run æŒ‰é’® */
button[onclick="analyzeCode()"] {
    background: #4a90e2;
    padding: 10px 20px;
}

/* ç»“æœå®¹å™¨ */
#results-content {
    font-size: 12px;
}

/* åŒ¹é…é¡¹ */
.match-item {
    background: #f0f7ff;
    border: 1px solid #b3d9ff;
    border-radius: 4px;
    padding: 12px;
    margin-bottom: 12px;
}
```

---

## ğŸ“ ä»£ç å˜æ›´è¯¦æƒ…

### æ–‡ä»¶ä¿®æ”¹
- **æ–‡ä»¶**: `crates/cr-web/src/handlers/playground.rs`
- **è¡Œæ•°**: ä¿®æ”¹äº† HTML ç»“æ„å’Œ JavaScript é€»è¾‘

### ä¸»è¦æ”¹åŠ¨

1. **HTML ç»“æ„é‡ç»„**
   - å·¦ä¾§é¢æ¿: ä»ä»£ç è¾“å…¥æ”¹ä¸º YAML è§„åˆ™ç¼–è¾‘
   - å³ä¾§é¢æ¿: ä»ç»“æœæ˜¾ç¤ºæ”¹ä¸ºä»£ç å’Œç»“æœç»„åˆ
   - æ·»åŠ  Inspect Rule éƒ¨åˆ†

2. **æ ‡ç­¾é¡µæ›´æ–°**
   - å·¦ä¾§: simple/advanced
   - å³ä¾§: test code/metadata/docs
   - æ·»åŠ : Pro/Turbo æŒ‰é’®

3. **JavaScript ä¼˜åŒ–**
   - ç®€åŒ– switchTab() å‡½æ•°
   - æ”¹è¿›æ ‡ç­¾é¡µåˆ‡æ¢é€»è¾‘
   - ä¿ç•™ setFormat() å‡½æ•°å…¼å®¹æ€§

---

## ğŸ¯ åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | åŸå§‹ | æ–°è®¾è®¡ |
|------|------|--------|
| YAML è§„åˆ™ç¼–è¾‘ | âŒ | âœ… |
| ç®€å•/é«˜çº§æ¨¡å¼ | âŒ | âœ… |
| Inspect Rule | âŒ | âœ… |
| ä»£ç ç¼–è¾‘ | âœ… | âœ… |
| ç»“æœæ˜¾ç¤º | âœ… | âœ… |
| å…ƒæ•°æ®æŸ¥çœ‹ | âœ… | âœ… |
| API æ–‡æ¡£ | âœ… | âœ… |
| Pro/Turbo æŒ‰é’® | âŒ | âœ… |

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### å¯åŠ¨æœåŠ¡

```bash
cd /Volumes/Raiden_C2J/Projects/Desktop_Projects/CR/astgrep
cargo run -p cr-web --bin cr-web
```

### æ‰“å¼€ Playground

```
http://127.0.0.1:8080/playground
```

### ä½¿ç”¨æµç¨‹

1. **ç¼–å†™è§„åˆ™** (å·¦ä¾§)
   - é€‰æ‹© simple æˆ– advanced æ ‡ç­¾é¡µ
   - ç¼–å†™ YAML è§„åˆ™
   - æŸ¥çœ‹ Inspect Rule éƒ¨åˆ†

2. **ç¼–å†™æµ‹è¯•ä»£ç ** (å³ä¾§)
   - é€‰æ‹©ç¼–ç¨‹è¯­è¨€
   - è¾“å…¥æµ‹è¯•ä»£ç 
   - ç‚¹å‡» "Run Ctrl+â†µ" æŒ‰é’®

3. **æŸ¥çœ‹ç»“æœ** (å³ä¾§)
   - æŸ¥çœ‹åŒ¹é…é¡¹
   - æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
   - æŸ¥çœ‹å…ƒæ•°æ®æˆ–æ–‡æ¡£

---

## ğŸ“Š ç•Œé¢å¯¹æ¯”

### åŸå§‹ç•Œé¢ç‰¹ç‚¹
- âœ… ä»£ç è¾“å…¥å’Œç»“æœåˆ†ç¦»
- âœ… æ”¯æŒæ–‡ä»¶ä¸Šä¼ 
- âœ… å¿«é€Ÿç¤ºä¾‹æŒ‰é’®
- âœ… æ ¼å¼é€‰æ‹© (JSON/SARIF)

### æ–°è®¾è®¡ç‰¹ç‚¹
- âœ… YAML è§„åˆ™ç¼–è¾‘
- âœ… ç®€å•/é«˜çº§æ¨¡å¼
- âœ… Inspect Rule æ˜¾ç¤º
- âœ… Pro/Turbo æŒ‰é’®
- âœ… æ›´æ¥è¿‘ Semgrep é£æ ¼

---

## âœ¨ æ€»ç»“

**Playground ç•Œé¢é‡æ–°è®¾è®¡å®Œæˆï¼**

æˆ‘ä»¬æˆåŠŸå°† Playground ç•Œé¢ä»é€šç”¨ä»£ç åˆ†æå·¥å…·æ”¹é€ ä¸ºæ›´æ¥è¿‘ Semgrep é£æ ¼çš„è§„åˆ™ç¼–è¾‘å’Œæµ‹è¯•å·¥å…·ã€‚

### ä¸»è¦æˆå°±

1. âœ… å·¦ä¾§æ”¹ä¸º YAML è§„åˆ™ç¼–è¾‘å™¨
2. âœ… å³ä¾§æ”¹ä¸ºä»£ç å’Œç»“æœç»„åˆ
3. âœ… æ·»åŠ  Inspect Rule éƒ¨åˆ†
4. âœ… æ”¹è¿›æ ‡ç­¾é¡µå’ŒæŒ‰é’®
5. âœ… ä¼˜åŒ–æ ·å¼å’Œæ’ç‰ˆ
6. âœ… ç¼–è¯‘æˆåŠŸï¼Œæ— é”™è¯¯

### æ–°å¢åŠŸèƒ½

- YAML è§„åˆ™ç¼–è¾‘ (simple/advanced)
- Inspect Rule æ˜¾ç¤º
- Pro/Turbo æŒ‰é’®
- æ”¹è¿›çš„ç»“æœæ˜¾ç¤º

### ä¸‹ä¸€æ­¥

- å®ç° YAML è§„åˆ™éªŒè¯
- å®ç° Inspect Rule åŠŸèƒ½
- æ·»åŠ è§„åˆ™æ‰§è¡Œé€»è¾‘
- ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ

---

**å®Œæˆæ—¥æœŸ**: 2025-10-18  
**çŠ¶æ€**: âœ… å®Œæˆ  
**ä¸‹ä¸€æ­¥**: å®ç°è§„åˆ™ç¼–è¾‘å’Œæ‰§è¡ŒåŠŸèƒ½

