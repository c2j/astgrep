# CR-SemService vs Semgrep æŠ€æœ¯å¯¹æ¯”

## ğŸ“Š æ¶æ„å¯¹æ¯”

### Semgrep æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Semgrep CLI / Web UI           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Rule Engine (Python)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Pattern Matching (OCaml)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Language Parsers (Tree-sitter)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   AST Representation                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CR-SemService æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      CLI / Web UI (Rust)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Rule Engine (Rust)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Pattern Matching (Rust)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Language Parsers (Tree-sitter)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Universal AST (Rust)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å·®å¼‚**: CR-SemService å…¨ Rust å®ç°ï¼Œæ€§èƒ½æ›´ä¼˜

---

## ğŸ”§ è§„åˆ™æ ¼å¼å¯¹æ¯”

### å­—æ®µå¯¹æ¯”è¡¨

| å­—æ®µ | Semgrep | CR-SemService | å…¼å®¹æ€§ | å¤‡æ³¨ |
|------|---------|---------------|--------|------|
| id | âœ… | âœ… | 100% | è§„åˆ™å”¯ä¸€æ ‡è¯† |
| message | âœ… | âœ… | 100% | é”™è¯¯æ¶ˆæ¯ |
| name | âŒ | âœ… | å•å‘ | CR-SemService æ‰©å±• |
| description | âŒ | âœ… | å•å‘ | CR-SemService æ‰©å±• |
| languages | âœ… | âœ… | 100% | æ”¯æŒè¯­è¨€åˆ—è¡¨ |
| severity | âœ… | âœ… | 100% | ä¸¥é‡çº§åˆ« |
| confidence | âœ… | âœ… | 100% | ç½®ä¿¡åº¦ |
| patterns | âœ… | âœ… | 100% | æ¨¡å¼å®šä¹‰ |
| metadata | âœ… | âœ… | 100% | å…ƒæ•°æ® |
| fix | âœ… | âœ… | 100% | ä¿®å¤å»ºè®® |
| fix-regex | âœ… | âŒ | 0% | æ­£åˆ™æ›¿æ¢ |
| paths | âœ… | âŒ | 0% | è·¯å¾„è¿‡æ»¤ |
| options | âœ… | ğŸŸ¡ | 50% | é€‰é¡¹é…ç½® |
| mode | âœ… | âŒ | 0% | åˆ†ææ¨¡å¼ |
| join | âœ… | âŒ | 0% | è§„åˆ™è¿æ¥ |
| equivalences | âœ… | âŒ | 0% | ç­‰ä»·æ€§ |

**æ€»ä½“å…¼å®¹æ€§**: 10/16 = **62.5%** (æ ¸å¿ƒå­—æ®µ 10/10 = 100%)

---

## ğŸ¯ æ¨¡å¼ç±»å‹å¯¹æ¯”

### æ”¯æŒçš„æ¨¡å¼ç±»å‹

| æ¨¡å¼ç±»å‹ | Semgrep | CR-SemService | å…¼å®¹æ€§ | æµ‹è¯• |
|---------|---------|---------------|--------|------|
| pattern | âœ… | âœ… | 100% | âœ… |
| pattern-either | âœ… | âœ… | 100% | âœ… |
| pattern-inside | âœ… | âœ… | 100% | âœ… |
| pattern-not | âœ… | âœ… | 100% | âœ… |
| pattern-not-inside | âœ… | âœ… | 100% | âœ… |
| pattern-regex | âœ… | âœ… | 100% | âœ… |
| pattern-not-regex | âœ… | âœ… | 100% | âœ… |
| pattern-all | âœ… | ğŸŸ¡ | 70% | ğŸŸ¡ |
| pattern-any | âœ… | ğŸŸ¡ | 70% | ğŸŸ¡ |
| pattern-where | âœ… | ğŸŸ¡ | 50% | ğŸŸ¡ |
| pattern-comby | âœ… | âŒ | 0% | âŒ |
| pattern-focus | âœ… | ğŸŸ¡ | 60% | ğŸŸ¡ |

**å®Œå…¨å…¼å®¹**: 7/12 = **58%**  
**é«˜åº¦å…¼å®¹**: 10/12 = **83%**

---

## ğŸŒ è¯­è¨€æ”¯æŒå¯¹æ¯”

### æ”¯æŒçš„è¯­è¨€

| è¯­è¨€ | Semgrep | CR-SemService | å…¼å®¹æ€§ | ä¼˜å…ˆçº§ |
|------|---------|---------------|--------|--------|
| Java | âœ… | âœ… | 100% | ğŸ”´ |
| Python | âœ… | âœ… | 100% | ğŸ”´ |
| JavaScript | âœ… | âœ… | 100% | ğŸ”´ |
| TypeScript | âœ… | âœ… | 100% | ğŸ”´ |
| Go | âœ… | âœ… | 100% | ğŸ”´ |
| Rust | âœ… | âœ… | 100% | ğŸ”´ |
| C | âœ… | âœ… | 100% | ğŸ”´ |
| C# | âœ… | âœ… | 100% | ğŸ”´ |
| PHP | âœ… | âŒ | 0% | ğŸŸ¡ |
| Ruby | âœ… | âŒ | 0% | ğŸŸ¡ |
| Kotlin | âœ… | âŒ | 0% | ğŸŸ¡ |
| Swift | âœ… | âŒ | 0% | ğŸŸ¡ |
| SQL | âœ… | ğŸŸ¡ | 50% | ğŸŸ¡ |
| Bash | âœ… | ğŸŸ¡ | 50% | ğŸŸ¡ |
| å…¶ä»– (22+) | âœ… | âŒ | 0% | ğŸŸ¢ |

**æ ¸å¿ƒè¯­è¨€å…¼å®¹**: 8/8 = **100%**  
**æ€»ä½“å…¼å®¹**: 8/30 = **27%**

---

## ğŸ’¡ åŠŸèƒ½ç‰¹æ€§å¯¹æ¯”

### åŸºç¡€åŠŸèƒ½

| åŠŸèƒ½ | Semgrep | CR-SemService | å…¼å®¹æ€§ |
|------|---------|---------------|--------|
| åŸºç¡€æ¨¡å¼åŒ¹é… | âœ… | âœ… | 100% |
| å…ƒå˜é‡ç»‘å®š | âœ… | âœ… | 100% |
| æ­£åˆ™è¡¨è¾¾å¼ | âœ… | âœ… | 100% |
| å¤šè¯­è¨€æ”¯æŒ | âœ… | âœ… | 100% |
| JSON è¾“å‡º | âœ… | âœ… | 100% |
| SARIF è¾“å‡º | âœ… | âœ… | 100% |
| æ–‡æœ¬è¾“å‡º | âœ… | âœ… | 100% |
| XML è¾“å‡º | âœ… | âœ… | 100% |

**åŸºç¡€åŠŸèƒ½å…¼å®¹**: 8/8 = **100%** âœ…

### é«˜çº§åŠŸèƒ½

| åŠŸèƒ½ | Semgrep | CR-SemService | å…¼å®¹æ€§ |
|------|---------|---------------|--------|
| æ•°æ®æµåˆ†æ | âœ… | ğŸŸ¡ | 60% |
| æ±¡ç‚¹è¿½è¸ª | âœ… | ğŸŸ¡ | 50% |
| ç¬¦å·ä¼ æ’­ | âœ… | ğŸŸ¡ | 40% |
| å¸¸é‡ä¼ æ’­ | âœ… | ğŸŸ¡ | 50% |
| è·¨å‡½æ•°åˆ†æ | âœ… | âŒ | 0% |
| è·¨æ–‡ä»¶åˆ†æ | âœ… | âŒ | 0% |
| ç±»å‹æ¨æ–­ | âœ… | ğŸŸ¡ | 30% |
| æ§åˆ¶æµåˆ†æ | âœ… | ğŸŸ¡ | 40% |

**é«˜çº§åŠŸèƒ½å…¼å®¹**: 0/8 = **0%** (éƒ¨åˆ†å®ç° 4/8 = 50%)

### ç”Ÿæ€åŠŸèƒ½

| åŠŸèƒ½ | Semgrep | CR-SemService | å…¼å®¹æ€§ |
|------|---------|---------------|--------|
| è§„åˆ™å¸‚åœº | âœ… | âŒ | 0% |
| IDE é›†æˆ | âœ… | âŒ | 0% |
| CI/CD é›†æˆ | âœ… | âŒ | 0% |
| åˆ†å¸ƒå¼æ‰«æ | âœ… | âŒ | 0% |
| è§„åˆ™ç‰ˆæœ¬ç®¡ç† | âœ… | âŒ | 0% |
| Web UI | âœ… | ğŸŸ¡ | 50% |
| API æœåŠ¡ | âœ… | âœ… | 100% |
| æ€§èƒ½ç›‘æ§ | âœ… | ğŸŸ¡ | 30% |

**ç”Ÿæ€åŠŸèƒ½å…¼å®¹**: 1/8 = **12.5%**

---

## âš¡ æ€§èƒ½å¯¹æ¯”

### æ‰§è¡Œæ€§èƒ½

| åœºæ™¯ | Semgrep | CR-SemService | ä¼˜åŠ¿ |
|------|---------|---------------|------|
| ç®€å•æ¨¡å¼ | 900ms | 50ms | **18x** |
| å¤æ‚æ¨¡å¼ | 1200ms | 120ms | **10x** |
| å¤§æ–‡ä»¶ (>10MB) | 5s | 500ms | **10x** |
| å¤šæ–‡ä»¶ (100+) | 30s | 3s | **10x** |
| å¯åŠ¨æ—¶é—´ | 500ms | 50ms | **10x** |

### èµ„æºå ç”¨

| æŒ‡æ ‡ | Semgrep | CR-SemService | ä¼˜åŠ¿ |
|------|---------|---------------|------|
| å†…å­˜å ç”¨ | 70MB | 15MB | **4.7x** |
| CPU ä½¿ç”¨ç‡ | é«˜ | ä½ | **ä¼˜ç§€** |
| ç£ç›˜å ç”¨ | 500MB | 50MB | **10x** |

### å¯æ‰©å±•æ€§

| æŒ‡æ ‡ | Semgrep | CR-SemService | ä¼˜åŠ¿ |
|------|---------|---------------|------|
| å¹¶è¡Œå¤„ç† | æœ‰é™ | ä¼˜ç§€ | **ä¼˜ç§€** |
| ç¼“å­˜æ•ˆç‡ | ä¸­ç­‰ | é«˜ | **ä¼˜ç§€** |
| å¢é‡åˆ†æ | æœ‰é™ | æ”¯æŒ | **ä¼˜ç§€** |

---

## ğŸ”„ è§„åˆ™è¿ç§»æŒ‡å—

### 100% å…¼å®¹çš„è§„åˆ™

```yaml
# Semgrep è§„åˆ™
rules:
  - id: sql-injection
    message: SQL injection detected
    languages: [java]
    severity: ERROR
    patterns:
      - pattern: $STMT.execute($QUERY)

# CR-SemService è§„åˆ™ (ç›´æ¥å…¼å®¹)
rules:
  - id: sql-injection
    message: SQL injection detected
    languages: [java]
    severity: ERROR
    patterns:
      - pattern: $STMT.execute($QUERY)
```

### éœ€è¦è°ƒæ•´çš„è§„åˆ™

```yaml
# Semgrep è§„åˆ™ (ä½¿ç”¨ fix-regex)
rules:
  - id: hardcoded-password
    message: Hardcoded password
    fix-regex:
      regex: 'password\s*=\s*"[^"]*"'
      replacement: 'password = "***"'

# CR-SemService è§„åˆ™ (ä½¿ç”¨ fix)
rules:
  - id: hardcoded-password
    message: Hardcoded password
    fix: 'Use environment variables instead'
```

### ä¸å…¼å®¹çš„è§„åˆ™

```yaml
# Semgrep è§„åˆ™ (ä½¿ç”¨ pattern-comby)
rules:
  - id: complex-pattern
    message: Complex pattern
    patterns:
      - pattern-comby: |
          :[~x] = :[~y]
          ...
          :[~x]

# CR-SemService æ›¿ä»£æ–¹æ¡ˆ
rules:
  - id: complex-pattern
    message: Complex pattern
    patterns:
      - pattern-either:
          - pattern: $X = $Y
          - pattern: $X = $Y; ... $X
```

---

## ğŸ“ˆ è¿ç§»æˆæœ¬è¯„ä¼°

### è§„åˆ™è¿ç§»

| è§„åˆ™ç±»å‹ | æ•°é‡ | å…¼å®¹æ€§ | å·¥ä½œé‡ |
|---------|------|--------|--------|
| åŸºç¡€è§„åˆ™ | 60% | 100% | 0 |
| ä¸­ç­‰è§„åˆ™ | 30% | 80% | ä½ |
| å¤æ‚è§„åˆ™ | 10% | 50% | ä¸­ |

**å¹³å‡è¿ç§»æˆæœ¬**: æ¯æ¡è§„åˆ™ 5-10 åˆ†é’Ÿ

### åŠŸèƒ½è¿ç§»

| åŠŸèƒ½ | å·¥ä½œé‡ | éš¾åº¦ | æ—¶é—´ |
|------|--------|------|------|
| åŸºç¡€åŠŸèƒ½ | 0 | - | 0 |
| é«˜çº§åŠŸèƒ½ | ä¸­ | ä¸­ | 2-4å‘¨ |
| ç”Ÿæ€åŠŸèƒ½ | é«˜ | é«˜ | 4-8å‘¨ |

---

## âœ… å…¼å®¹æ€§æ£€æŸ¥æ¸…å•

### è§„åˆ™å…¼å®¹æ€§æ£€æŸ¥

- [ ] æ‰€æœ‰å¿…éœ€å­—æ®µå­˜åœ¨ (id, message, languages, patterns)
- [ ] ä½¿ç”¨æ”¯æŒçš„æ¨¡å¼ç±»å‹
- [ ] ä½¿ç”¨æ”¯æŒçš„è¯­è¨€
- [ ] ä¸ä½¿ç”¨ fix-regex (æ”¹ç”¨ fix)
- [ ] ä¸ä½¿ç”¨ paths (æ”¹ç”¨ CLI è¿‡æ»¤)
- [ ] ä¸ä½¿ç”¨ pattern-comby (æ”¹ç”¨ pattern-either)

### åŠŸèƒ½å…¼å®¹æ€§æ£€æŸ¥

- [ ] ä¸ä¾èµ–è·¨å‡½æ•°åˆ†æ
- [ ] ä¸ä¾èµ–è·¨æ–‡ä»¶åˆ†æ
- [ ] ä¸ä¾èµ–é«˜çº§ç±»å‹æ¨æ–­
- [ ] ä¸ä¾èµ–è§„åˆ™å¸‚åœº
- [ ] ä¸ä¾èµ– IDE é›†æˆ

---

## ğŸ¯ å»ºè®®

### ç«‹å³å¯ç”¨

âœ… æ‰€æœ‰åŸºç¡€è§„åˆ™å¯ç›´æ¥è¿ç§»  
âœ… æ‰€æœ‰åŸºç¡€åŠŸèƒ½å®Œå…¨å…¼å®¹  
âœ… æ€§èƒ½æå‡ 10-18x

### éœ€è¦è°ƒæ•´

ğŸŸ¡ é«˜çº§è§„åˆ™éœ€è¦è½»å¾®è°ƒæ•´  
ğŸŸ¡ é«˜çº§åŠŸèƒ½éœ€è¦éƒ¨åˆ†é‡å†™  
ğŸŸ¡ ç”Ÿæ€å·¥å…·éœ€è¦é‡æ–°é›†æˆ

### é•¿æœŸè§„åˆ’

âŒ è·¨å‡½æ•°åˆ†æéœ€è¦æ–°å®ç°  
âŒ è§„åˆ™å¸‚åœºéœ€è¦æ–°å¼€å‘  
âŒ IDE é›†æˆéœ€è¦æ–°å¼€å‘

---

**å¯¹æ¯”å®Œæˆ** âœ…

